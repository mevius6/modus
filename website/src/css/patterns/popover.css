/**
  Popover API
  → https://developer.mozilla.org/en-US/docs/Web/API/Popover_API
  → https://open-ui.org/components/popover.research.explainer/
  → https://developer.chrome.com/blog/introducing-popover-api
  → https://css-irl.info/anchor-positioning-and-the-popover-api/
  → https://html.spec.whatwg.org/dev/popover.html#the-popover-attribute
  → https://davidwalsh.name/html-popover-attribute
*/

/**
 * [popover] { user agent stylesheet
 *   position: fixed;
 *   inset: 0;
 *   width: fit-content;
 *   height: fit-content;
 *   margin: auto;
 *   border: solid;
 *   padding: 0.25em;
 *   overflow: auto;
 *   color: CanvasText;
 *   background-color: Canvas;
 * }
 */

/* Override UA position */
[popover]:popover-open {
  position: absolute;
  inset: unset;
  padding: 0;
  margin: 0;
  border: 0;
}

[popover]::backdrop {
  backdrop-filter: blur(3px);
}

/* Transition for the popover itself */

[popover]:popover-open {
  opacity: 1;
  transform: scaleX(1);
}

[popover] {
  /* Final state of the exit animation */
  opacity: 0;

  transition:
    opacity 0.7s,
    transform 0.7s,
    overlay 0.7s allow-discrete,
    display 0.7s allow-discrete;
  transform: scaleX(0);

  /* Equivalent to
  transition: all 0.7s allow-discrete; */
}

/* Needs to be after the previous [popover]:popover-open rule
to take effect, as the specificity is the same */
@starting-style {
  [popover]:popover-open {
    opacity: 0;
    transform: scaleX(0);
  }
}

/* Transition for the popover's backdrop */

[popover]::backdrop {
  background-color: rgb(0 0 0 / 0%);
  transition:
    display 0.7s allow-discrete,
    overlay 0.7s allow-discrete,
    background-color 0.7s;

  /* Equivalent to
  transition: all 0.7s allow-discrete; */
}

[popover]:popover-open::backdrop {
  background-color: rgb(0 0 0 / 25%);
}

/* The nesting selector (&) cannot represent pseudo-elements
so this starting-style rule cannot be nested */

@starting-style {
  [popover]:popover-open::backdrop {
    background-color: rgb(0 0 0 / 0%);
  }
}

/* https://codepen.io/argyleink/pen/zYbQBOm */
/* https://codepen.io/argyleink/pen/qBGOamz */
